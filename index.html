<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/OHModel.css">
    <title></title>
</head>
<body>
<div class="g-top clear-b">
    <a class="m-logo f-fl"><img src="images/logo-text.png" alt=""></a>
    <div class="u-adjust f-fl" id="adjust"><i class="glyphicon glyphicon-align-justify"></i></div>

    <div class="m-user f-fr">
        <span class="name"><span class="text f-ib">这是五六个字</span><i class="caret"></i></span>
        <div class="menu-box">
            <a class="item text">嘉兴市粮食局</a>
            <a class="item">个人中心</a>
            <a class="item"><span class="f-ib">消息</span><span class="badge">3</span></a>
            <a class="item">退出</a>
        </div>
    </div>
    <ul class="m-nav f-fr" id="nav">
        <li class="f-ib"><a class="item" href="">粮食业务</a></li>
        <li class="f-ib"><a class="item" href="">收购管理</a></li>
        <li class="f-ib"><a class="item" href="">粮情监控</a></li>
        <li class="f-ib"><a class="item" href="">应急管理</a></li>
        <li class="f-ib"><a class="item" href="">查询管理</a></li>
        <li class="f-ib"><a class="item" href="">系统管理</a></li>
        <li class="f-ib"><a class="item" href="">内部管理</a></li>
    </ul>
</div>
<div class="g-left" id="slide_frame">
    <ul class="m-left-nav">
        <li class="item active">
            <a href=""><i class="glyphicon glyphicon-folder-open"></i>菜单1级</a>
            <ul class="sub-nav">
                <li class="sub-item"><a href="">菜单1-1级</a></li>
                <li class="sub-item active"><a href="">菜单1-2级</a></li>
                <li class="sub-item"><a href="">菜单1-3级</a></li>
            </ul>
        </li>
        <li class="item"><a href=""><i class="glyphicon glyphicon-folder-open"></i>菜单2级</a></li>
        <li class="item"><a href=""><i class="glyphicon glyphicon-folder-open"></i>菜单2级</a></li>
        <li class="item"><a href=""><i class="glyphicon glyphicon-folder-open"></i>菜单4级</a></li>
    </ul>
</div>
<div class="g-main" id="main_frame">
    <table class="m-tb search">
        <tr class="tb-title">
            <td colspan="4">查询表格</td>
        </tr>
        <tr>
            <td class="tb-field-head">姓名</td>
            <td class="tb-field-content">
                <input type="text" value="tony" />
            </td>
            <td class="tb-field-head">性别</td>
            <td class="tb-field-content">
                <select name="sex" id="">
                    <option value="male">男</option>
                    <option value="female">女</option>
                </select>
            </td>
        </tr>
        <tr>
            <td class="tb-field-head">年龄</td>
            <td class="tb-field-content"></td>
            <td class="tb-field-head">身高</td>
            <td class="tb-field-content"></td>
        </tr>
        <tr class="tb-bottom">
            <td colspan="4">
                <span>每页显示</span>
                <input type="text" class="page-num" value="10">
                <span>行数据</span>
                <button class="u-btn">查询</button>
                <button class="u-btn">重置</button>
                <button class="u-btn">返回</button>
            </td>
        </tr>
    </table>
    <table class="m-tb">
        <tr class="tb-title">
            <td colspan="5">
                默认表格
            </td>
        </tr>
        <tr class="tb-head">
            <td>id</td>
            <td>name</td>
            <td>sex</td>
            <td>age</td>
            <td>height</td>
        </tr>
        <tr class="tb-content odd">
            <td>1</td>
            <td>jhon</td>
            <td>male</td>
            <td>20</td>
            <td><a href="">操作</a></td>
        </tr>
        <tr class="tb-content">
            <td>2</td>
            <td>tom</td>
            <td>male</td>
            <td>22</td>
             <td><a href="">操作</a></td>
        </tr>
        <tr class="tb-content odd">
            <td>3</td>
            <td>mey</td>
            <td>female</td>
            <td>21</td>
            <td><a href="">操作</a></td>
        </tr>
        <tr class="tb-bottom">
            <td colspan="5">
                    <span></span>
                    <button class="u-btn">首页</button>
                    <button class="u-btn" disabled>上页</button>
                    <button class="u-btn">下页</button>
                    <button class="u-btn">尾页</button>
                    <input type="text" class="page-num" value="1" />
                    <button class="u-btn">GO</button>
            </td>
        </tr>
    </table>
</div>
<div class="g-bottom bg-success">
</div>
<script type="text/javascript" src="plugIn/jquery-1.8.3.min.js"></script>
<script>

    window.onload = function () {
        adjust();

    };

    //调整侧边栏收放
    function adjust() {
        var sp = false;
        $('#adjust').on('click',function () {
            console.log(sp);
            var slide = $('#slide_frame');
            var main = $('#main_frame');
            if(!sp){
                slide.addClass('open');
                main.addClass('open');
            }else {
                slide.removeClass('open');
                main.removeClass('open');
            }
            sp = !sp;
        });
    }

    //加载侧边菜单
    function addSlideNav() {
        $.ajax({
            type: 'GET',
            url: 'json/slideNav.json',
            success: function (data) {
                console.log(data);
                var snav = new SlideNav('slide_frame',data);
                snav.init();
            },
            error: function () {
                console.log('error');
            }
        })
    }



    //侧边栏菜单
    function SlideNav(id,data) {
        this.data = data;
        this.id = id;
    }

    SlideNav.prototype = {
        constructor : SlideNav,
        init : function () {
            var _this = this;
            var obj = document.getElementById(_this.id);
            console.log(obj);
            _this.createDom(obj);
            _this.addClickEvent(obj);
        },
        createDom : function (obj) {
            var _this = this;
            var dataTemp = _this.data;
            var subData;
            var htmlStr = '<ul class="m-left-nav">';
            for(var i=0;i<dataTemp.length;i++){
                htmlStr +='<li><a ><i class="glyphicon glyphicon-folder-open"></i>'+dataTemp[i].name+'</a>';
                if(dataTemp[i].sub){
                    htmlStr += '<ul>';
                    subData = dataTemp[i].sub;
                    for(var j=0;j<subData.length;j++){
                        htmlStr +='<li class=""><a >'+subData[j].name+'</a></li>';
                    }
                    htmlStr += '</ul>';
                }
                htmlStr +='</li>';
            }
            htmlStr += '</ul>';

            $(obj).append(htmlStr);
        },
        addClickEvent : function (obj) {
            $(obj).on('click','li',function () {
                $(this).addClass('active').siblings().removeClass('active');
                console.log();
                $(this).find('li').removeClass('active');
            })
        }
    }


</script>

</body>
</html>